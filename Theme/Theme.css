@layer init {
    :not(:defined) {
        display: none;
    }

    :root {
        --Theme__accent_hue: 200;
        --Theme__background: hsl(var(--Theme__hue), 10%, 20%);
        --Theme__block__background: hsl(var(--Theme__hue), 10%, 30%);
        --Theme__block__background_light: hsl(var(--Theme__hue), 10%, 50%);
        --Theme__block__gap: 8px;
        --Theme__block__gap_double: calc(var(--Theme__block__gap) * 2);
        --Theme__block__radius: 8px;
        --Theme__edge__width: 16px;
        --Theme__font: var(--Theme__font_size) / var(--Theme__font_lineHeight) var(--Theme__font_family);
        --Theme__font_family: 'Arial';
        --Theme__font_lineHeight: calc(var(--Theme__font_size) * 1.5);
        --Theme__font_size: 16px;
        --Theme__foreground: #fff;
        --Theme__foreground_dim: hsl(var(--Theme__hue), 20%, 60%);
        --Theme__ghost_transition: opacity 0.4s ease-out;
        --Theme__hue: 240;
        --Theme__selection: hsl(var(--Theme__accent_hue), 50%, 50%);
        --Theme__shadow: #0004;

        background: var(--Theme__background);
        color: var(--Theme__foreground);
        font: var(--Theme__font);
    }


    body {
        margin: 0;
    }

    x-flickable {
        --Flickable__puck__margin_inner: 32px;
        overflow: hidden;
        position: relative;

        &::after {
            background: linear-gradient(transparent, var(--Theme__shadow));
            content: '';
            height: var(--Theme__edge__width);
            inset: 0;
            opacity: 0;
            pointer-events: none;
            position: absolute;
            top: auto;
            transition: var(--Theme__ghost_transition);
        }
        &[_scroll_y]:not([_scrollEdge_y_end])::after {
            opacity: 1;
        }

        &::before {
            background: linear-gradient(var(--Theme__shadow), transparent);
            bottom: auto;
            content: '';
            height: var(--Theme__edge__width);
            inset: 0;
            opacity: 0;
            pointer-events: none;
            position: absolute;
            transition: var(--Theme__ghost_transition);
        }
        &[_scroll_y]:not([_scrollEdge_y_begin])::before {
            opacity: 1;
        }

        &::part(puck) {
            background: var(--Theme__block__background_light);
        }
    }

    x-message {
        --Message__date_color: var(--Theme__foreground_dim);
        --Message__gap: var(--Theme__block__gap);
    }

    x-messageFlow {
        --MessageFlow__button_send__size: calc(var(--Theme__font_lineHeight) + var(--Theme__block__gap_double) * 2);
        --MessageFlow__gap: var(--Theme__block__gap);
    }

    x-textArea {
        --TextArea__gap: var(--Theme__block__gap);
        --TextArea__puck__margin_inner: var(--Theme__block__gap);
        --TextArea__puck__margin_outer: var(--Theme__block__gap_double);
        border: none;
        max-height: min(120px, 50dvh);
        width: auto;

        &::part(input)::selection {
            background-color: var(--Theme__selection);
            font: var(--Theme__font);
        }

        &::part(puck) {
            background: var(--Theme__block__background_light);
        }
    }


    .block {
        background: var(--Theme__block__background);
        border-radius: var(--Theme__block__radius);
        padding: var(--Theme__block__gap_double);
    }

    .button {
        background: var(--Theme__block__background);
        border-radius: 50%;
        cursor: pointer;
        fill: var(--Theme__selection);
        padding: var(--Theme__block__gap_double);

        &:hover {
            background: var(--Theme__selection);
            fill: var(--Theme__foreground);
        }
    }

    .ghost {
        &[_building] {
            opacity: 0;
        }
        &:not([_building]) {
            transition: var(--Theme__ghost_transition);
        }
    }
}
